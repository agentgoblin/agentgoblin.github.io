let mapa,randint=e=>Math.floor(Math.random()*e),rollDice=e=>Math.floor(Math.random()*e)+1,rolld6=()=>Math.floor(6*Math.random())+1,ror=e=>e.push(e.shift()),rol=e=>e.unshift(e.pop());function shift(e){var a=rollDice(3);if(1==a)return 0==e[e.length-1]?void 0:void ror(e);3==a&&0!=e[0]&&rol(e)}function rotate(e){var a=rollDice(3);1==a?ror(e):3==a&&rol(e)}function mline(e,a){if(a<e)throw new RangeError("Number of significant charecters longer than line length value.");var a=a-e,t=Math.floor(a/2),a=Math.ceil(a/2),t=[...Array(t)].map(()=>0);return t.push(...[...Array(e)].map(()=>rolld6())),t.push(...[...Array(a)].map(()=>0)),shift(t),t}function make_mapa(e){var a,t=Math.ceil(Math.sqrt(e))+1,r=[...Array(t).keys()],n=[...Array(t)].map(()=>0);for(a of Array(e).keys()){var o=r[randint(r.length)];n[o]+=1,n[o]==t&&r.splice(r.indexOf(o),1)}for(;-1!=n.indexOf(0);)n.splice(n.indexOf(0),1);var l,m=[];for(l of n)m.push(mline(l,t));return m}function fromCode(){var e=document.getElementById("mapCode").value.split("-");mapa=[];for(v of e)mapa.push(v.split("").map(e=>Number(e)));drawTable()}function toCode(){var e=mapa.map(e=>e.join("")).join("-");document.getElementById("mapCode").value=e}function generate(){var e=Number(document.getElementById("dicesCount").value);mapa=make_mapa(e),drawTable()}function drawTable(){void 0===mapa&&(mapa=[[1,2,3],[4,5,6]]),toCode();for(var e=document.getElementById("table");0<e.children.length;)e.removeChild(e.lastChild);var t=document.createElement("table");for(let a=0;a<mapa.length;a++){var r=document.createElement("tr");for(let e=0;e<mapa[a].length;e++){var n=document.createElement("td"),o=document.createElement("img");document.getElementById("showAsDices").checked?o.src="../images/dice"+mapa[a][e]+".png":o.src="../images/map"+mapa[a][e]+".png",alttext=0==mapa[a][e]?"":"[ "+mapa[a][e]+" ]",o.alt=alttext,n.appendChild(o),r.appendChild(n)}t.appendChild(r)}e.appendChild(t)}